<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GCAM-USA • helios</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="GCAM-USA">
<meta property="og:description" content="helios">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">helios</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    <span class="fas fa-book"></span>
     
    Guides
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette_gcam-usa.html">GCAM-USA</a>
    </li>
    <li>
      <a href="../articles/vignette_gcam-regions.html">GCAM-Regions</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">
    <span class="fas fa-code-branch"></span>
     
    Reference
  </a>
</li>
<li>
  <a href="../CONTRIBUTING.html">Contribute</a>
</li>
<li>
  <a href="../news/index.html">
    <span class="fa fa-newspaper-o"></span>
     
    News
  </a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/JGCRI/helios/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>GCAM-USA</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/JGCRI/helios/blob/HEAD/vignettes/vignette_gcam-usa.Rmd" class="external-link"><code>vignettes/vignette_gcam-usa.Rmd</code></a></small>
      <div class="hidden name"><code>vignette_gcam-usa.Rmd</code></div>

    </div>

    
    
<!-------------------------->
<!-------------------------->
<div class="section level2">
<h2 id="input-data">Input Data<a class="anchor" aria-label="anchor" href="#input-data"></a>
</h2>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="vignetteFigs/divider.png"></p>
<p><code>helios</code> is an R package that calculates heating and
cooling degrees based on high temporal and spatial resolution of climate
data (hourly and 12km resolution) and population data (yearly and 12km
resolution). In this tutorial, we introduce how to use
<code>helios</code> to support GCAM-USA, where we use climate data over
CONUS from WRF or those with the same format and spatial resolution.
Data are available on NERSC if users have access. <a href="#table1">Table 1</a> shows more details on the climate and
population data supported by <code>helios</code>.</p>
<p>* This method was developed for the GCAM-USA version as part of the
Integrated Multisector, Multiscale Modeling (IM3) project.</p>
<p><br></p>
<p><a name="table1"></a> <strong>Table 1:</strong> Description of
required input data in this tutorial.</p>
<table class="table">
<colgroup>
<col width="33%">
<col width="33%">
<col width="33%">
</colgroup>
<thead><tr class="header">
<th>Specification</th>
<th>WRF Climate Data</th>
<th>Population Data</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Input Format</td>
<td>NetCDF File</td>
<td>CSV File</td>
</tr>
<tr class="even">
<td>Spatial Resolution</td>
<td>WRF Resolution: 12 x 12 km</td>
<td>WRF Resolution: 12 x 12 km</td>
</tr>
<tr class="odd">
<td>Temporal Resolution</td>
<td>Hourly</td>
<td>Annual</td>
</tr>
<tr class="even">
<td>Required Variable</td>
<td>Temperature T2 (K)</td>
<td>Population (Capita)</td>
</tr>
<tr class="odd">
<td>Cluster Location</td>
<td>(NERSC) /global/cfs/cdirs/m2702/gsharing/tgw-wrf-conus</td>
<td>(NERSC) /global/cfs/cdirs/m2702/gcamusa/hddcdd/pop_1km</td>
</tr>
<tr class="even">
<td>Full Dataset Download</td>
<td>N/A</td>
<td>(Pre-processed) <a href="https://zenodo.org/record/3756179#.Y5fLK3bMKUl" class="external-link uri">https://zenodo.org/record/3756179#.Y5fLK3bMKUl</a>
</td>
</tr>
<tr class="odd">
<td>Example Dataset</td>
<td><code><a href="../reference/example_wrf_usa_ncdf.html">helios::example_wrf_usa_ncdf</a></code></td>
<td><code><a href="../reference/example_pop_usa_csv.html">helios::example_pop_usa_csv</a></code></td>
</tr>
<tr class="even">
<td>More Information</td>
<td><a href="https://www.mmm.ucar.edu/models/wrf" class="external-link uri">https://www.mmm.ucar.edu/models/wrf</a></td>
<td><a href="https://www.mdpi.com/2071-1050/12/8/3374" class="external-link uri">https://www.mdpi.com/2071-1050/12/8/3374</a></td>
</tr>
</tbody>
</table>
<p>Please note that <code>helios</code> can process multiple climate
NetCDF files with one population CSV file for each run. However,
parallelizing grouped climate data can improve calculation efficiency
for large dataset.</p>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="vignetteFigs/divider.png"></p>
<p><code>helios</code> includes 6 major steps in the workflow for CONUS
heating- and cooling-degrees calculation (<a href="#figure1">Figure
1</a>),</p>
<ul>
<li>Step 1: Process climate NetCDF at 12-km resolution.</li>
<li>Step 2: Calculate weighted population.</li>
<li>Step 3: Calculate heating and cooling degree-hours at grid
resolution.</li>
<li>Step 4: Aggregate heating and cooling degree-hours by CONUS and
building energy demand sector (This can be used as input to
GCAM-USA).</li>
<li>Step 5: Calculate heating and cooling degree-days at monthly and
annual scale for CONUS.</li>
<li>Step 6: Post-process for diagnostic and convert to GCAM required
format.</li>
</ul>
<p>*<strong>Note:</strong> Dispatch segments are defined as 24 day and
night segments in each month of the year (e.g., Jan-day, Jan-night,
Feb-day, Feb-night, etc), plus a “super-peak” segment that has the top
10% of loads within a year for each grid region. Dispatch segments are
specifically used in GCAM-USA.</p>
<p><br></p>
<p align="center">
<img src="vignetteFigs/helios_gcam-usa_workflow.jpg"></p>
<a name="figure1"></a>
<p align="left" style="font-size:14px;">
<strong>Figure 1:</strong> Helios workflow for CONUS heating and cooling
degree-days for GCAM-USA.
</p>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div class="section level2">
<h2 id="method">Method<a class="anchor" aria-label="anchor" href="#method"></a>
</h2>
<!-------------------------->
<!-------------------------->
<p><code>helios</code> calculates different units of heating and cooling
degrees for different temporal scale. <a href="#table2">Table 2</a>
shows more details of the method</p>
<p><a name="table2"></a> <strong>Table 2:</strong> Methods for
calculating heating and cooling degrees at different temporal
scales.</p>
<table class="table">
<colgroup>
<col width="12%">
<col width="12%">
<col width="12%">
<col width="12%">
<col width="50%">
</colgroup>
<thead><tr class="header">
<th>Temporal Scale</th>
<th>Spatial Scale</th>
<th>Sector</th>
<th>Unit</th>
<th>Method</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Dispatch Segment</td>
<td>U.S. States</td>
<td>Building Thermal Service*</td>
<td>Degree-hours</td>
<td>1. Calculate heating degree-hours (HDH) and cooling degree-hours
(CDH) as the difference between hourly temperature and comfortable
temperature (65F). <br><span class="math display">\[HDH = T_i -
T_{comfort}, \ if \ T_i &lt; T_{comfort}\]</span> <br><span class="math display">\[CDH = T_i - T_{comfort}, \ if \ T_i &gt;
T_{comfort}\]</span> <br> where, <span class="math inline">\(T_i\)</span> is the hourly temperature at a grid
cell; <span class="math inline">\(T_{comfort}\)</span> is the
comfortable temperature (usually 65F for USA). <br> 2. Multiply the
weighted population with degree-days within the same grid cell. <br>
3. Aggregate hourly HDH and CDH by dispatch segment, U.S. States, and
building energy demand sectors.</td>
</tr>
<tr class="even">
<td>Monthly</td>
<td>U.S. States</td>
<td>N/A</td>
<td>Degree-days</td>
<td>1. Calculate daily mean temperature as the average of minimum and
maximum daily temperature. <br> 2. Calculate heating degree-days (HDD
&lt; 0) and cooling degree-days (CDD &gt; 0) as the difference between
mean temperature and comfortable temperature (65F). <br> 3. Aggregate
daily HDD (HDD &lt; 0) and CDD (CDD &gt; 0) by monthly,
respectively.</td>
</tr>
<tr class="odd">
<td>Annual</td>
<td>U.S. States</td>
<td>N/A</td>
<td>Degree-days</td>
<td>1.Aggregate monthly HDD (HDD &lt; 0) and CDD (CDD &gt; 0) by year,
respectively.</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>* Building thermal service includes: commercial heating, commercial
cooling, residential heating, and residential cooling.</p>
<p><br></p>
<!-------------------------->
<!-------------------------->
</div>
<div class="section level2">
<h2 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a>
</h2>
<!-------------------------->
<!-------------------------->
<p align="center">
<img src="vignetteFigs/divider.png"></p>
<div class="section level3">
<h3 id="example-climate-and-population-dataset">Example climate and population dataset<a class="anchor" aria-label="anchor" href="#example-climate-and-population-dataset"></a>
</h3>
<p>Due to large size of the climate data (netCDF file),
<code>helios</code> provide spatially subsetted example dataset for
demonstration purpose.</p>
<ul>
<li>
<strong>Climate NetCDF File</strong>:
<code><a href="../reference/example_wrf_usa_ncdf.html">helios::example_wrf_usa_ncdf</a></code> subsets subsets an
approxmitely [-119.86,-118.18,37.99, 39.30] longitude and latitude box
within the U.S. (12-km resolution) from the WRF hourly data. Data time
ranges from 2020-01-01 01:00:00 to 2020-01-08 00:00:00.</li>
<li>
<strong>Population CSV File</strong>:
<code><a href="../reference/example_pop_usa_csv.html">helios::example_pop_usa_csv</a></code> is population for 2020, which
is geo-referenced to WRF grid cells.</li>
</ul>
<p><br></p>
</div>
<div class="section level3">
<h3 id="calculate-heating-and-cooling-degrees">Calculate heating and cooling degrees<a class="anchor" aria-label="anchor" href="#calculate-heating-and-cooling-degrees"></a>
</h3>
<p>The following example specifies the arguments for processing WRF
dataset. More information for the arguments can be found in
(<code><a href="../reference/hdcd.html">helios::hdcd</a></code> Reference)[<a href="https://jgcri.github.io/helios/reference/hdcd.html" class="external-link uri">https://jgcri.github.io/helios/reference/hdcd.html</a>].</p>
<ul>
<li>
<code>ncdf_var = 'T2'</code> specifies climate variable to extract
from the netCDF, which is temperature in this case.</li>
<li>
<code>model = 'wrf'</code> specifies the model used to produce the
climate forcing data, which is WRF model in this case.</li>
<li>
<code>spatial = 'states_us_49'</code> specifies we are only
calculating the cooling and heating degrees within 49 states of USA.
This will produce outputs that can be used for <code>GCAM-USA</code>.
For tutorial of using <code>helios</code> for global 32 regions, please
check out <a href="vignette_gcam-regions.html">GCAM-regions</a> tutorial
page.</li>
<li>
<code>temporal = 2020</code> specifies the time period 2020 to
include since the example data only covers 7 days in 2020.</li>
</ul>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/JGCRI/helios" class="external-link">helios</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example data: WRF hourly climate at 12-km resolution</span></span>
<span><span class="va">path_to_climate_ncdf</span> <span class="op">&lt;-</span> <span class="fu">helios</span><span class="fu">::</span><span class="fu"><a href="../reference/pkg_example.html">pkg_example</a></span><span class="op">(</span><span class="st">'wrfout_d01_2020-01-01_01%3A00%3A00_sub.nc'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># example data: population of 2020 at same 12-km resolution as WRF</span></span>
<span><span class="va">path_to_population</span> <span class="op">&lt;-</span> <span class="fu">helios</span><span class="fu">::</span><span class="fu"><a href="../reference/pkg_example.html">pkg_example</a></span><span class="op">(</span><span class="st">'population_conus_ssp2_2020wrf_wgs84.csv'</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate heating and coolong degrees for CONUS (e.g., part of USA in the example)</span></span>
<span><span class="va">hdcd_usa</span> <span class="op">&lt;-</span> <span class="fu">helios</span><span class="fu">::</span><span class="fu"><a href="../reference/hdcd.html">hdcd</a></span><span class="op">(</span>ncdf <span class="op">=</span> <span class="va">path_to_climate_ncdf</span>,</span>
<span>                         ncdf_var <span class="op">=</span> <span class="st">'T2'</span>,</span>
<span>                         model <span class="op">=</span> <span class="st">'wrf'</span>,</span>
<span>                         population <span class="op">=</span> <span class="va">path_to_population</span>,</span>
<span>                         spatial <span class="op">=</span> <span class="st">'states_us_49'</span>,</span>
<span>                         temporal <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>                         reference_temp_F <span class="op">=</span> <span class="fl">65</span>,</span>
<span>                         folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/output"</span><span class="op">)</span>,</span>
<span>                         diagnostics <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                         xml <span class="op">=</span> <span class="cn">F</span>,</span>
<span>                         name_append <span class="op">=</span> <span class="st">""</span>,</span>
<span>                         save <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "Starting function process_hdcd..."</span></span>
<span><span class="co">## [1] "Processing files provided: /Users/runner/work/_temp/Library/helios/extras/wrfout_d01_2020-01-01_01%3A00%3A00_sub.nc"</span></span>
<span><span class="co">## [1] "........................................."</span></span>
<span><span class="co">## [1] "Running hdcd for file: /Users/runner/work/_temp/Library/helios/extras/wrfout_d01_2020-01-01_01%3A00%3A00_sub.nc"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named west_east BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named south_north BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named Time BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named west_east BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named south_north BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named Time BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named west_east BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named south_north BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "vobjtovarid4: **** WARNING **** I was asked to get a varid for dimension named Time BUT this dimension HAS NO DIMVAR! Code will probably fail at this point"</span></span>
<span><span class="co">## [1] "Starting population weighting ..."</span></span>
<span><span class="co">## [1] "Completed population weighting."</span></span>
<span><span class="co">## [1] "Processing hdcd completed for file: /Users/runner/work/_temp/Library/helios/extras/wrfout_d01_2020-01-01_01%3A00%3A00_sub.nc"</span></span>
<span><span class="co">## [1] "process_hdcd completed."</span></span></code></pre>
<p><br></p>
<p>The output is a list containing three tables. Please note the
different units (degree-hours or degree-days) for different outputs.</p>
<ul>
<li>
<code>hdcd_usa$hdcd_comb</code>: Heating and cooling
<strong>degree-hours</strong> by dispatch segment for CONUS and by
building thermal service.</li>
<li>
<code>hdcd_usa$hdcd_comb_monthly</code>: Heating and cooling
<strong>degree-days</strong> by month for CONUS (part of USA in the
example).</li>
<li>
<code>hdcd_usa$hdcd_comb_annual</code>: Heating and cooling
<strong>degree-days</strong> by year for CONUS (part of USA in the
example).</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Heating and cooling degree-hours by dispatch segment and by building thermal service for CONUS</span></span>
<span><span class="va">hdcd_segment</span> <span class="op">&lt;-</span> <span class="va">hdcd_usa</span><span class="op">$</span><span class="va">hdcd_comb</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">hdcd_segment</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">'Annual Heating and Cooling Degree-hours by Building Thermal Service'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Annual Heating and Cooling Degree-hours by Building Thermal
Service</caption>
<colgroup>
<col width="5%">
<col width="7%">
<col width="3%">
<col width="7%">
<col width="10%">
<col width="7%">
<col width="15%">
<col width="23%">
<col width="9%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">region</th>
<th align="left">subRegion</th>
<th align="left">year</th>
<th align="left">segment</th>
<th align="left">gcam.consumer</th>
<th align="left">nodeInput</th>
<th align="left">building.node.input</th>
<th align="left">thermal.building.service.input</th>
<th align="left">unit</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Dec_day</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Dec_day</td>
<td align="left">degree-hours</td>
<td align="right">-0.0114599</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Dec_day</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Dec_day</td>
<td align="left">degree-hours</td>
<td align="right">-0.0114599</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Dec_night</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Dec_night</td>
<td align="left">degree-hours</td>
<td align="right">-0.0414882</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Dec_night</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Dec_night</td>
<td align="left">degree-hours</td>
<td align="right">-0.0414882</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Jan_day</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Jan_day</td>
<td align="left">degree-hours</td>
<td align="right">-0.3393844</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Jan_day</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Jan_day</td>
<td align="left">degree-hours</td>
<td align="right">-0.3393844</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Jan_night</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Jan_night</td>
<td align="left">degree-hours</td>
<td align="right">-0.6256360</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">Jan_night</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Jan_night</td>
<td align="left">degree-hours</td>
<td align="right">-0.6256360</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Dec_day</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Dec_day</td>
<td align="left">degree-hours</td>
<td align="right">-1.0170742</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Dec_day</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Dec_day</td>
<td align="left">degree-hours</td>
<td align="right">-1.0170742</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Dec_night</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Dec_night</td>
<td align="left">degree-hours</td>
<td align="right">-3.7933185</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Dec_night</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Dec_night</td>
<td align="left">degree-hours</td>
<td align="right">-3.7933185</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Jan_day</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Jan_day</td>
<td align="left">degree-hours</td>
<td align="right">-30.8660315</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Jan_day</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Jan_day</td>
<td align="left">degree-hours</td>
<td align="right">-30.8660315</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Jan_night</td>
<td align="left">comm</td>
<td align="left">comm</td>
<td align="left">comm_building</td>
<td align="left">comm heating Jan_night</td>
<td align="left">degree-hours</td>
<td align="right">-57.7348273</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">Jan_night</td>
<td align="left">resid</td>
<td align="left">resid</td>
<td align="left">resid_building</td>
<td align="left">resid heating Jan_night</td>
<td align="left">degree-hours</td>
<td align="right">-57.7348273</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Heating and cooling degree-days at monthly scale for CONUS</span></span>
<span><span class="va">hdcd_monthly</span> <span class="op">&lt;-</span> <span class="va">hdcd_usa</span><span class="op">$</span><span class="va">hdcd_comb_monthly</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">hdcd_monthly</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">'Monthly Heating and Cooling Degree-days'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Monthly Heating and Cooling Degree-days</caption>
<thead><tr class="header">
<th align="left">region</th>
<th align="left">subRegion</th>
<th align="left">year</th>
<th align="left">month</th>
<th align="left">HDCD</th>
<th align="left">unit</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">01</td>
<td align="left">CD</td>
<td align="left">degree-days</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">01</td>
<td align="left">HD</td>
<td align="left">degree-days</td>
<td align="right">-0.0483388</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">01</td>
<td align="left">CD</td>
<td align="left">degree-days</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">01</td>
<td align="left">HD</td>
<td align="left">degree-days</td>
<td align="right">-4.3027594</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Heating and cooling degree-days at annual scale for CONUS</span></span>
<span><span class="va">hdcd_annual</span> <span class="op">&lt;-</span> <span class="va">hdcd_usa</span><span class="op">$</span><span class="va">hdcd_comb_annual</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="va">hdcd_annual</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">'Annual Heating and Cooling Degree-days'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Annual Heating and Cooling Degree-days</caption>
<thead><tr class="header">
<th align="left">region</th>
<th align="left">subRegion</th>
<th align="left">year</th>
<th align="left">HDCD</th>
<th align="left">unit</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">CD</td>
<td align="left">degree-days</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">CA</td>
<td align="left">2020</td>
<td align="left">HD</td>
<td align="left">degree-days</td>
<td align="right">-0.0483388</td>
</tr>
<tr class="odd">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">CD</td>
<td align="left">degree-days</td>
<td align="right">0.0000000</td>
</tr>
<tr class="even">
<td align="left">USA</td>
<td align="left">NV</td>
<td align="left">2020</td>
<td align="left">HD</td>
<td align="left">degree-days</td>
<td align="right">-4.3027594</td>
</tr>
</tbody>
</table>
<p><br></p>
<p>*<strong>Note:</strong> Please note that we use a spatial subset of
WRF input climate NetCDF data as an example, which only covers 7 days.
To get heating and cooling degrees for a complete year, users need to
run climate NetCDF files using <code>helios</code> that cover the length
of a year. For example, if each climate NetCDF is for 7-days, then user
need to include about 52 climate NetCDF to cover a whole year of climate
data. Then, users can use <code>helios::diagnostic</code> to create
plots to check heating and cooling degree behaviors throughout a
year.</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="diagnostics">Diagnostics<a class="anchor" aria-label="anchor" href="#diagnostics"></a>
</h3>
<p>After getting the data table for heating and cooling degrees, users
can perform diagnostics and compare with NOAA observations if data
covers the U.S. The diagnostics create the following plots at segment
and monthly time step:</p>
<ul>
<li>Heating and cooling degrees for each year</li>
<li>Comparison of heating and cooling degrees among all years</li>
</ul>
<p>Users can also use <code><a href="../reference/diagnostics.html">helios::diagnostics</a></code> to visualize any
heating and cooling degree data as long as they include those columns in
the monthly data or the segment data: [subRegion, year, month/segment,
HDCD, value]</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Heating and cooling degree-hours by dispatch segment</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">helios</span><span class="fu">::</span><span class="va"><a href="../reference/example_hdcd_segment_usa.html">example_hdcd_segment_usa</a></span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,<span class="op">]</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">'Heating and Cooling Degree-hours by Segment'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Heating and Cooling Degree-hours by Segment</caption>
<thead><tr class="header">
<th align="left">subRegion</th>
<th align="right">year</th>
<th align="left">segment</th>
<th align="right">value</th>
<th align="left">HDCD</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="left">Apr_day</td>
<td align="right">1658.2854</td>
<td align="left">CD</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="left">Apr_day</td>
<td align="right">-927.7123</td>
<td align="left">HD</td>
</tr>
<tr class="odd">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="left">Apr_night</td>
<td align="right">118.5805</td>
<td align="left">CD</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="left">Apr_night</td>
<td align="right">-2939.6348</td>
<td align="left">HD</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Heating and cooling degree-days by month</span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="fu">helios</span><span class="fu">::</span><span class="va"><a href="../reference/example_hdcd_monthly_usa.html">example_hdcd_monthly_usa</a></span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,<span class="op">]</span>, </span>
<span>             caption <span class="op">=</span> <span class="st">'Monthly Heating and Cooling Degree-days'</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<caption>Monthly Heating and Cooling Degree-days</caption>
<thead><tr class="header">
<th align="left">subRegion</th>
<th align="right">year</th>
<th align="right">month</th>
<th align="left">HDCD</th>
<th align="right">value</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="right">1</td>
<td align="left">HD</td>
<td align="right">-554.602736</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="right">2</td>
<td align="left">CD</td>
<td align="right">3.119958</td>
</tr>
<tr class="odd">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="right">2</td>
<td align="left">HD</td>
<td align="right">-720.422022</td>
</tr>
<tr class="even">
<td align="left">AL</td>
<td align="right">2020</td>
<td align="right">3</td>
<td align="left">CD</td>
<td align="right">6.460285</td>
</tr>
</tbody>
</table>
<p>If the data coverage is too short (e.g., less than 6 months),
diagnostics will not create plot by default. Users can change the
constraint on numbers of months in the data using argument
<code>min_diagnostic_months</code> to enable diagnostics even with short
data coverage. The followings show how to use diagnostics with example
outputs of heating and cooling degrees at both segment and monthly time
step.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform diagnostic on monthly data</span></span>
<span><span class="fu">helios</span><span class="fu">::</span><span class="fu"><a href="../reference/diagnostics.html">diagnostics</a></span><span class="op">(</span>hdcd_monthly <span class="op">=</span> <span class="fu">helios</span><span class="fu">::</span><span class="va"><a href="../reference/example_hdcd_monthly_usa.html">example_hdcd_monthly_usa</a></span>,</span>
<span>                    min_diagnostic_months <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                    folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/output"</span><span class="op">)</span>,</span>
<span>                    name_append <span class="op">=</span> <span class="st">'monthly'</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p align="center">
<img src="vignetteFigs/monthly_allYears_noaa-2021_wrf_rcp45cooler_ssp3.png"></p>
<a name="figure2"></a>
<p align="left" style="font-size:14px;">
<strong>Figure 2:</strong> Diagnostics for monthly heating and cooling
degree-days from 2020 to 2050.
</p>
<p><br></p>
<p>Segment output , set <code>spatial = 'states_us_49'</code> to
indicate the data</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform diagnostic on segment data</span></span>
<span><span class="fu">helios</span><span class="fu">::</span><span class="fu"><a href="../reference/diagnostics.html">diagnostics</a></span><span class="op">(</span>hdcd <span class="op">=</span> <span class="fu">helios</span><span class="fu">::</span><span class="va"><a href="../reference/example_hdcd_segment_usa.html">example_hdcd_segment_usa</a></span>,</span>
<span>                    spatial <span class="op">=</span> <span class="st">'states_us_49'</span>,</span>
<span>                    min_diagnostic_months <span class="op">=</span> <span class="fl">6</span>,</span>
<span>                    folder <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/getwd.html" class="external-link">getwd</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"/output"</span><span class="op">)</span>,</span>
<span>                    name_append <span class="op">=</span> <span class="st">'segment'</span><span class="op">)</span></span></code></pre></div>
<p><br></p>
<p align="center">
<img src="vignetteFigs/segment_allYears_freeScale_wrf_rcp45cooler_ssp3.png"></p>
<a name="figure3"></a>
<p align="left" style="font-size:14px;">
<strong>Figure 3:</strong> Diagnostics for heating and cooling
degree-hours by dispatch segment from 2020 to 2050.
</p>
<p><br></p>
</div>
<div class="section level3">
<h3 id="xml-file-for-gcam-usa">XML file for GCAM-USA<a class="anchor" aria-label="anchor" href="#xml-file-for-gcam-usa"></a>
</h3>
<p>Finally, for GCAM users, <code>helios</code> can save the outputs by
building thermal service to XML format, which is a required format for
GCAM inputs. Set <code>xml = TRUE</code> in the
<code><a href="../reference/hdcd.html">helios::hdcd</a></code> function will save the XML file to the output
folder.</p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Mengqi Zhao, Zarrar Khan, Kalyn Dorheim, Chris Vernon.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
